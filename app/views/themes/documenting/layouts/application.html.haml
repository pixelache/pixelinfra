!!!
%html
  %head
    %meta{:content => "width=device-width, initial-scale=1.0", :name => "viewport"}
      %title= content_for?(:title) ? yield(:title) : "mediataiteen dokumentointi"
      %meta{:content => content_for?(:description) ? yield(:description) : "OLSOF project", :name => "description"}
      = stylesheet_link_tag "application", :media => "all"
      %link{:href => "http://fonts.googleapis.com/css?family=Roboto:400,500,700,300", :rel => "stylesheet", :type => "text/css"}/
      = stylesheet_link_tag 'documenting/stylesheets/application', :media => :screen
      = csrf_meta_tags
      
      = yield(:head)
      
  %body{:class => "#{controller_name} #{action_name}"}
    = javascript_include_tag "application"
    = javascript_include_tag "vendor/modernizr"
    - if user_signed_in?
      %header
        .contain-to-grid.sticky= render 'admin/layouts/navigation'
    .row
      .large-4.medium-12.small-10.small-offset-1.columns.push.medium-offset-0#sidebar
        .row
          .logo_container.medium-6.large-12.large-offset-0.columns
            .subtitle tilallisen ja tapahtuallisen
            .logo
              .first= link_to 'mediataiteen', '/'
            .logo
              .second= link_to 'dokumentointi', '/'

            .small-8.columns.show-for-small-only.small-offset-4
              %select#mobile_menu
                %option= t :choose
                %option{:selected => (controller.controller_name == 'pages' ? :selected : false), :value => page_path('about')}= t :about
                %option{:selected => (controller.controller_name == 'nodes' ? :selected : false), :value => nodes_path}= t :partners
                %option{:selected => (controller.controller_name == 'publications' ? :selected : false), :value => publications_path}= t :publications
                %option{select: controller.controller_name == 'steps' ? :selected : false, value: steps_path}= t :steps
          
                %option{:selected =>  controller.controller_name == 'events' ? :selected : false, :value => events_path}= t :events

                %option{:selected => (controller.controller_name == 'home'  || controller.controller_name == 'posts' ? :selected : false), :value => '/'}= t :news
                :javascript 
                  $('#mobile_menu').change(function() {
                    window.location = $(this).find("option:selected").val();
                  });
        
          .nav_lines.medium-6.large-12.large-offset-0.columns
            = image_tag current_theme_image_path('hybrid.png'), :class => :navbg
            / .item.publications= link_to t(:publications), publications_path
            / .item.about= link_to t(:about), page_path('about')
            / .item.partners= link_to t(:partners), nodes_path
            / .item.steps= link_to t(:steps), steps_path
            / .item.events= link_to t(:events), events_path
            / .item.news= link_to t(:news), '/'
        .row
          /
          / .search.medium-4.medium-offset-1.large-10.columns.large-offset-2.small-offset-2
          /   .square= image_tag current_theme_image_path('littlesquare.jpg')
          /   = form_tag '/search/' do
          /     = text_field :search, :term
          /     = submit_tag 'Search'
          = yield :sidebar

      .large-8.small-12.pull.columns#middle.medium-offset-0.large-offset-0
        = yield :middle

        .right_wrap.row.show-for-large-up
          .small-12.columns
            .language
              .default
                .active= image_tag(current_theme_image_path('black_circle.png'))
                .current= I18n.locale.to_s
              .choices
                - [:en, :fi, :fr]. each do |lang|
                  - next if lang == I18n.locale
                  .choice
                    = link_to(:controller => controller.controller_name, :action => controller.action_name, :id => params[:id], :locale => lang.to_s) do
                      .choice_circle= image_tag(current_theme_image_path('black_circle.png'))
                      .choice_text= lang.to_s
          
        .row
          .small-10.small-offset-1.medium-10.medium-offset-1.columns#main= yield
    %footer.olsof-footer
      .row  
        .small-12.columns.text-center.info_line
          = link_to 'Contact', 'mailto:office@pixelache.ac'
          |
          2016
          |
          = link_to 'GitHub', 'https://github.com/pixelache/pixelinfra'
      .row 
        .small-12.medium-7.medium-centered.columns.logos
          = link_to image_tag(theme_image_path('pixelache_logo.png')), 'http://pixelache.ac/'
          = link_to image_tag(theme_image_path('avarkki_logo.png')), 'http://www.av-arkki.fi/'
          = link_to image_tag(theme_image_path('mcult_logo.png')), 'http://www.m-cult.org/'
    :javascript
      $(document).ready(function() {
        #{yield :jquery}
      });
