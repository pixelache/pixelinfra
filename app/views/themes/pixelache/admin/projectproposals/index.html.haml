.row
  .small-12.columns
    %h2 Pixelache project proposals

.row
  .small-6.columns= link_to t(:create_new_proposal), new_admin_projectproposal_path, class: [:button, :round]
.row
  .small-12.columns
    %table
      %thead
        %th= sortable_column "Proposal #", :column => :id
        %th= sortable_column "Proposer", :column => :user
        %th= sortable_column "Name"
        %th= sortable_column "Comments"
        %th &nbsp;
      %tbody
        - @projectproposals.each do |prop|
          %tr
            %td= prop.id.to_s
            %td
              = prop.primary_initiator.name
              %p
                %small= t(:created_on, :when => l(prop.created_at, format: :short))
            %td
              = prop.name
              - if prop.project
                %p
                  %small= prop.project.name
            %td
              = prop.comments.size.to_s
              - unless prop.comments.empty?
                %p
                  %small= t(:posted_by, :poster => prop.comments.order(:created_at).last.user.name, :when => l( prop.comments.order(:created_at).last.created_at, format: :short))
            %td
              = link_to t(:view), [:admin, prop], class: [:button, :round, :tiny]
              - if can? :edit, prop
                = link_to t(:edit), edit_admin_projectproposal_path(prop), class: [:button, :round, :tiny]
              - if can? :destroy, prop
                = link_to t(:destroy), [:admin, prop], :method => :delete, class: [:button, :alert, :round, :tiny], :data => { :confirm =>  t(:are_you_sure) }
        