= content_for :description do
  = truncate(strip_tags(@page.body), length: 200)
.page{class:  @page.slug}
  - unless @page.photos.blank?
    .centered_title= image_tag @page.photos.first.filename.url
  .row
    .large-8.medium-9.small-10.columns.page_text.small-centered
      = raw @page.body

    
   
- if @page.slug == 'locations'      
  .locations_map
    #map_container
  = content_for :jquery do
    :plain
      function initialize() {
        var myLatlng = new google.maps.LatLng(60.174134, 24.940317);
        var myOptions = { zoom: 13, 
              center: myLatlng,
              mapTypeId: google.maps.MapTypeId.ROADMAP,
              styles: [
              {
                  "featureType": "administrative",
                  "elementType": "all",
                  "stylers": [
                      {
                          "visibility": "on"
                      },
                      {
                          "hue": "#ff0000"
                      },
                      {
                          "weight": 0.4
                      },
                      {
                          "color": "#ffffff"
                      }
                  ]
              },
              {
                  "featureType": "landscape",
                  "elementType": "all",
                  "stylers": [
                      {
                          "visibility": "simplified"
                      },
                      {
                          "color": "#2b3f57"
                      },
                      {
                          "weight": 0.1
                      }
                  ]
              },
              {
                  "featureType": "landscape",
                  "elementType": "geometry",
                  "stylers": [
                      {
                          "visibility": "simplified"
                      },
                      {
                          "color": "#2f2e78"
                      }
                  ]
              },
              {
                  "featureType": "poi",
                  "elementType": "all",
                  "stylers": [
                      {
                          "color": "#6c5b7b"
                      }
                  ]
              },
              {
                  "featureType": "poi",
                  "elementType": "geometry.fill",
                  "stylers": [
                      {
                          "color": "#ff0000"
                      },
                      {
                          "visibility": "simplified"
                      }
                  ]
              },
              {
                  "featureType": "poi",
                  "elementType": "labels",
                  "stylers": [
                      {
                          "visibility": "off"
                      }
                  ]
              },
              {
                  "featureType": "road",
                  "elementType": "all",
                  "stylers": [
                      {
                          "color": "#ff0000"
                      }
                  ]
              },
              {
                  "featureType": "road",
                  "elementType": "geometry.fill",
                  "stylers": [
                      {
                          "color": "#e90649"
                      }
                  ]
              },
              {
                  "featureType": "road",
                  "elementType": "geometry.stroke",
                  "stylers": [
                      {
                          "color": "#ff0000"
                      },
                      {
                          "visibility": "on"
                      }
                  ]
              },
              {
                  "featureType": "road.highway",
                  "elementType": "geometry",
                  "stylers": [
                      {
                          "color": "#f55f77"
                      },
                      {
                          "weight": 3
                      }
                  ]
              },
              {
                  "featureType": "road.highway",
                  "elementType": "geometry.fill",
                  "stylers": [
                      {
                          "color": "#e90649"
                      },
                      {
                          "weight": "1"
                      }
                  ]
              },
              {
                  "featureType": "road.highway",
                  "elementType": "labels",
                  "stylers": [
                      {
                          "weight": 0.8
                      },
                      {
                          "color": "#ffffff"
                      },
                      {
                          "visibility": "on"
                      }
                  ]
              },
              {
                  "featureType": "road.highway",
                  "elementType": "labels.text",
                  "stylers": [
                      {
                          "weight": 1.3
                      },
                      {
                          "color": "#FFFFFF"
                      }
                  ]
              },
              {
                  "featureType": "road.arterial",
                  "elementType": "geometry",
                  "stylers": [
                      {
                          "color": "#f55f77"
                      },
                      {
                          "weight": 1.1
                      }
                  ]
              },
              {
                  "featureType": "road.arterial",
                  "elementType": "geometry.fill",
                  "stylers": [
                      {
                          "color": "#e90649"
                      }
                  ]
              },
              {
                  "featureType": "road.arterial",
                  "elementType": "geometry.stroke",
                  "stylers": [
                      {
                          "weight": "1.5"
                      }
                  ]
              },
              {
                  "featureType": "road.arterial",
                  "elementType": "labels",
                  "stylers": [
                      {
                          "color": "#ffffff"
                      },
                      {
                          "weight": 0.7
                      }
                  ]
              },
              {
                  "featureType": "road.local",
                  "elementType": "geometry",
                  "stylers": [
                      {
                          "color": "#f55f77"
                      },
                      {
                          "weight": 0.4
                      }
                  ]
              },
              {
                  "featureType": "road.local",
                  "elementType": "geometry.fill",
                  "stylers": [
                      {
                          "color": "#e90649"
                      },
                      {
                          "weight": "1"
                      }
                  ]
              },
              {
                  "featureType": "road.local",
                  "elementType": "geometry.stroke",
                  "stylers": [
                      {
                          "weight": "0.5"
                      },
                      {
                          "visibility": "off"
                      },
                      {
                          "color": "#cfd6da"
                      }
                  ]
              },
              {
                  "featureType": "road.local",
                  "elementType": "labels",
                  "stylers": [
                      {
                          "visibility": "on"
                      }
                  ]
              },
              {
                  "featureType": "road.local",
                  "elementType": "labels.text.fill",
                  "stylers": [
                      {
                          "color": "#ffffff"
                      }
                  ]
              },
              {
                  "featureType": "road.local",
                  "elementType": "labels.text.stroke",
                  "stylers": [
                      {
                          "weight": "0.01"
                      }
                  ]
              },
              {
                  "featureType": "transit",
                  "elementType": "geometry.fill",
                  "stylers": [
                      {
                          "color": "#cfd6da"
                      }
                  ]
              },
              {
                  "featureType": "transit",
                  "elementType": "geometry.stroke",
                  "stylers": [
                      {
                          "color": "#ff0000"
                      }
                  ]
              },
              {
                  "featureType": "transit.line",
                  "elementType": "all",
                  "stylers": [
                      {
                          "visibility": "on"
                      }
                  ]
              },
              {
                  "featureType": "transit.line",
                  "elementType": "geometry.fill",
                  "stylers": [
                      {
                          "visibility": "on"
                      },
                      {
                          "color": "#cfd6da"
                      }
                  ]
              },
              {
                  "featureType": "transit.station",
                  "elementType": "labels.text",
                  "stylers": [
                      {
                          "visibility": "simplified"
                      },
                      {
                          "color": "#cfd6da"
                      }
                  ]
              },
              {
                  "featureType": "water",
                  "elementType": "all",
                  "stylers": [
                      {
                          "color": "#f3b191"
                      }
                  ]
              },
              {
                  "featureType": "water",
                  "elementType": "geometry",
                  "stylers": [
                      {
                          "color": "#cfd6da"
                      }
                  ]
              },
              {
                  "featureType": "water",
                  "elementType": "labels.text",
                  "stylers": [
                      {
                          "visibility": "simplified"
                      },
                      {
                          "color": "#e90649"
                      }
                  ]
              }
          ]


           }


        map = new google.maps.Map(document.getElementById('map_container'), myOptions);
        
        var lapinlahden = new google.maps.LatLng(60.167691, 24.912903);
        var muu = new google.maps.LatLng(60.161903, 24.902699);
        var kiasma = new google.maps.LatLng(60.171487, 24.937111);
        var talvi = new google.maps.LatLng(60.1855927, 24.9297184);
      
        var marker1 = new google.maps.Marker({  position: lapinlahden, 
          title: 'Main location: Lapinlahti hospital', 
          icon: '/assets/empathy/images/pin1.png',
          map: map
        });
      
        var marker2 = new google.maps.Marker({  position: muu, 
          title: 'MUU Cable Factory', 
          icon: '/assets/empathy/images/pin2.png',
          map: map
        });
      
        var marker3 = new google.maps.Marker({  position: kiasma,
          title: 'Kiasma Museum of Contemporary Art', 
          icon: '/assets/empathy/images/pin3.png',
          map: map
        });
      
        var marker4 = new google.maps.Marker({  position: talvi, 
          title: 'Talvipuutarha', 
          icon: '/assets/empathy/images/pin4.png',
          map: map
        });
        return map;
      }
      //map = initialize();
      map = google.maps.event.addDomListener(window, 'load', initialize);
    